#!/bin/bash

# TODO: do something meaningful if the rebase fails, e.g. send notification (e-mail)

[[ $1 != "--debug" ]] && quiet="--quiet"

for repo in zou kitsu gazu cgwire; do
    cd $HOME/src/cgwire/$repo
    git fetch $quiet upstream
    git rebase $quiet upstream/master master
    git push $quiet origin master --tags
    git push $quiet github master --tags
done

if [[ -z $quiet ]]; then
    echo "$(date) - CG Wire repo's synced" >> $HOME/.synccgwire
    notify-send --app-name="CG Wire Sync" "ï‘ª CG Wire Sync" "Syncing of the CG Wire repositories done!"
fi
