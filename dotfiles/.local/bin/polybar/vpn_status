#!/bin/sh

vpn="$(nmcli --terse --fields NAME,TYPE c show --active | sed -Ene 's/^(.*):vpn$/\1/p' | head -n 1)"
# [[ -n "$vpn" ]] && printf '%%{F#1db954}%%{F-}'"  $vpn" || printf '%%{F#bd2c40}%%{F-}  No VPN'
[[ -n "$vpn" ]] && printf "  $vpn" || printf "  No VPN"

# Original line, keep for reference
# printf "VPN: " && (pgrep -a openvpn$ | head -n 1 | awk '{print $4 }' | cut -d '.' -f 2 && echo down) | head -n 1
