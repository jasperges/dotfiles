#!/bin/sh

vpn=$((pgrep -a openvpn$ | head -n 1 | awk '{print $4 }' | cut -d '.' -f 2 && echo down) | head -n 1)
if [ "$vpn" == "protonvpn" ]
then
    display="ProtonVPN"
else
    display="${vpn[@]^}"
fi
if [ "$vpn" == "down" ]
then
    # printf '%%{u#bd2c40}%%{+u}'" No VPN"
    printf '%%{F#bd2c40}%%{F-}'"  No VPN"
else
    # printf '%%{u#1db954}%%{+u}'" VPN: $vpn"
    printf '%%{F#1db954}%%{F-}'"  $display"
    # printf " ⇄ 易 VPN: $vpn"
fi

# Original line, keep for reference
# printf "VPN: " && (pgrep -a openvpn$ | head -n 1 | awk '{print $4 }' | cut -d '.' -f 2 && echo down) | head -n 1
