#!/bin/bash

# TODO:
#   - Move the list of radio stations to a config file? Like the 'emoji' fonts...

declare -A stations
stations["1. Radio Paradise"]="http://icy-7.radioparadise.com/rp_192m.ogg"
stations["2. <Stop Playing>"]="STOP"

mpc="mpc --host=guybrush.local --port=5700"

chosen="$(printf '%s\n' "${!stations[@]}" | sort | dmenu -p "Radio station")"
[[ $chosen ]] && stream="${stations[$chosen]}" || exit 0
if [[ "$stream" ]]; then
    [[ "$stream" = "STOP" ]] && $mpc stop && exit 0
    $mpc clear && $mpc add "$stream" && $mpc play && ncmpcpp_guybrush --screen=playlist
fi
