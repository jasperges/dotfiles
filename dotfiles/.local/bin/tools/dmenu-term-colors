#!/bin/sh
# Shows a dmenu prompt to choose the color theme for the terminal.
# At the moment only solarized light and dark are supported with Alacritty and
# (Neo)Vim.
# Is simply replaces the value of `colors` in alacritty.yml and sets
# `background` in (Neo)Vim accordingly to `light` or `dark`.
# Because I'm still using .vimrc it only replaces things in .vimrc, not in
# NeoVims init.vim.

theme=$(echo -e "Solarized Light\nSolarized Dark" \
    | dmenu -p "Which terminal color scheme would you like to use?" \
        -no-custom -lines 2 -i -select "Solarized Dark" \
    | tr '[:upper:]' '[:lower:]')
# If no theme in chosen, just exit
[[ -z "$theme" ]] && exit 0

scheme=$(echo "$theme" | cut -d ' ' -f1)
variant=$(echo "$theme" | cut -d ' ' -f2)
sed -i "s/^\(colors: \*\)[_a-z]\+$/\1$scheme\_$variant/" $HOME/.config/alacritty/alacritty.yml
sed -i "s/^\(set background=\)[_a-z]\+$/\1$variant/;s/^\(colorscheme \)[_a-z]\+$/\1$scheme/" $HOME/.vimrc
