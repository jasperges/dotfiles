#!/bin/bash

external_monitor=$(xrandr | sed -nE "s/^((DP|HDMI)-[0-9]+) connected.*$/\1/p")
internal_monitor=$(xrandr | sed -nE "s/^(LVDS-[0-9]+) connected.*$/\1/p")

if [[ $(hostname) = "soeperjaps" ]]; then
    xrandr --output DP-2 --auto --primary --panning 0x0 --pos 0x0
    xrandr --output DP-0 --auto --right-of DP-2
elif [[ -n $external_monitor ]]; then
    xrandr --output $external_monitor --auto --primary
    xrandr --output $internal_monitor --auto --right-of $external_monitor
    # TODO: move the interal monitor based on the actual resolutions of the monitors
    xrandr --output $internal_monitor --pos 2560x0
else
    xrandr --output $internal_monitor --auto --primary
    xrandr --output $internal_monitor --pos 0x0
    # TODO: get the resolution of the internal monitor
    xrandr --output $internal_monitor --mode 1680x1050 --pos 0x0 --panning 0x0
fi

$HOME/.fehbg
[[ $(pgrep picom) ]] || picom -b
setxinputs 2>/dev/null
